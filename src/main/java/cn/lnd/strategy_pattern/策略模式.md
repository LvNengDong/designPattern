# 策略模式

## 使用场景

- 利用它来避免冗长的 if-else 或 switch 分支判断
- 向模板方法模式那样，提供框架的扩展点。



## 原理



策略模式解耦的是策略的**定义、创建、使用**这三部分。



## 1、策略的定义

- 策略接口
- 一组实现这个接口的策略类

基于接口而非实现编程，可以灵活地替换不同的策略。





## 2、策略的创建

因为策略模式会包含一组策略，在真正使用的时候，一般会通过类型（Type）来判断创建哪个策略实例来使用。为了对客户端代码屏蔽创建细节，我们可以将根据 Type 创建策略对象实例的逻辑抽离出来，放到工厂类中。



### Case1：策略类是无状态的

如果策略类是**无状态**的，不包含成员变量，只是纯粹的算法实现，这样的策略对象是可以被共享的，不需要在每次调用 getStrategy() 的时候，都创建一个新的策略对象。针对这种情况，就可以使用上面这种工厂类的实现方式，实现创建好每个策略对象，缓存到工厂类中，用的时候直接返回。



### Case2：策略类是有状态的





## 3、策略的使用

策略模式包含了一组可选的策略，所以，客户端代码就涉及到了选择策略的流程。最常见的选择策略就是**运行时动态**确定使用哪种策略。

这里的“运行时动态”指的是，我们事先并不知道会使用哪个策略，而是在程序运行期间，根据配置、用户输入、计算结果等这些不确定因素，动态决定使用哪种策略。